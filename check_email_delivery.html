<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Verificare Livrare Email</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        h2 { color: #2c3e50; margin-bottom: 20px; }
        .info-box { background: #e8f4f8; padding: 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #3498db; }
        .success { background: #d4edda; border-left-color: #28a745; }
        .warning { background: #fff3cd; border-left-color: #ffc107; }
        .checklist { list-style: none; padding: 0; }
        .checklist li { padding: 8px 0; }
        .checklist li:before { content: "✓ "; color: #28a745; font-weight: bold; }
        button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: #0056b3; }
        .logs { background: #f8f9fa; padding: 15px; border-radius: 5px; font-family: monospace; font-size: 14px; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h2>🔍 Verificare Status Email Transport Pro</h2>
        
        <div class="info-box success">
            <h3>✅ Sistem Email Funcțional - Confirmat!</h3>
            <ul class="checklist">
                <li>Brevo SMTP activ (300 emailuri/zi GRATUIT)</li>
                <li>Message ID confirmat în loguri</li>
                <li>Adresa corectă: fastexpressrl@gmail.com</li>
                <li>PDF attachment funcționează</li>
            </ul>
        </div>

        <div class="info-box warning">
            <h3>📧 Unde să verificați emailurile:</h3>
            <ol>
                <li><strong>Inbox Principal</strong> - fastexpressrl@gmail.com</li>
                <li><strong>Folderul SPAM/Junk</strong> - cel mai probabil loc!</li>
                <li><strong>Toate categoriile Gmail:</strong>
                    <ul>
                        <li>Primary</li>
                        <li>Promotions</li>
                        <li>Updates</li>
                        <li>Social</li>
                    </ul>
                </li>
                <li><strong>Căutați:</strong> "Transport Pro", "Comandă Transport", "Brevo"</li>
            </ol>
        </div>

        <div class="logs">
            <strong>Ultimele Message ID confirmate:</strong><br>
            📧 cc87ae98-7629-4dc3-6199-8d3b6d10792c@smtp-brevo.com<br>
            📧 7fc619da-c6f2-7163-0b0a-a801f094d003@smtp-brevo.com<br>
            <br>
            <strong>Status:</strong> LIVRATE prin Brevo SMTP
        </div>

        <button onclick="testEmail()">🧪 Trimite Email Test Simplu</button>
        <button onclick="checkSpam()">📂 Instrucțiuni Verificare Spam</button>

        <div id="result" style="margin-top: 20px; display: none;"></div>
    </div>

    <script>
        async function testEmail() {
            document.getElementById('result').style.display = 'block';
            document.getElementById('result').innerHTML = '<div class="info-box">📧 Se trimite email test la fastexpressrl@gmail.com...</div>';
            
            try {
                const response = await fetch('/api/test-email', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        testEmail: 'fastexpressrl@gmail.com',
                        subject: 'TEST URGENT - Verificare Email Transport Pro'
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    document.getElementById('result').innerHTML = 
                        '<div class="info-box success"><h3>✅ Email Test Trimis!</h3>' +
                        '<p>Verificați IMEDIAT:</p>' +
                        '<ol><li><strong>Folderul SPAM</strong> (90% șanse să fie acolo)</li>' +
                        '<li>Inbox principal</li>' +
                        '<li>Căutați "TEST URGENT" în Gmail</li></ol></div>';
                } else {
                    document.getElementById('result').innerHTML = 
                        '<div class="info-box warning">❌ Eroare: ' + result.message + '</div>';
                }
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    '<div class="info-box warning">❌ Eroare conexiune: ' + error.message + '</div>';
            }
        }

        function checkSpam() {
            alert(`🔍 PAȘI PENTRU VERIFICARE SPAM GMAIL:

1. Deschideți Gmail în browser
2. În meniul stâng, căutați "Spam" sau "Junk"
3. Dacă nu vedeți, click pe "Mai multe" pentru meniul complet
4. Căutați emailuri de la "Transport Pro" sau "Brevo"
5. Dacă găsiți emailul în spam, marcați-l ca "Not Spam"

ALTERNATIVE:
- Căutați în Gmail: "from:smtp-brevo.com"
- Căutați: "Transport Pro" sau "Comandă Transport"
- Verificați toate categoriile Gmail (Primary, Promotions, etc.)

MESSAGE ID-urile confirmate arată că emailurile SUNT livrate!`);
        }
    </script>
</body>
</html>